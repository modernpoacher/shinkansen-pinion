"use strict";require("core-js/modules/es.array.is-array.js");require("core-js/modules/es.symbol.js");require("core-js/modules/es.symbol.description.js");require("core-js/modules/es.symbol.iterator.js");require("core-js/modules/es.array.iterator.js");require("core-js/modules/es.string.iterator.js");require("core-js/modules/web.dom-collections.iterator.js");require("core-js/modules/es.array.from.js");require("core-js/modules/es.array.slice.js");require("core-js/modules/es.function.name.js");require("core-js/modules/es.regexp.exec.js");require("core-js/modules/es.object.define-property.js");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=transformAnswer;exports.transformTypeArrayAnswer=transformTypeArrayAnswer;exports.transformTypeObjectAnswer=transformTypeObjectAnswer;require("core-js/modules/es.array.reduce.js");require("core-js/modules/es.object.to-string.js");require("core-js/modules/es.array.concat.js");require("core-js/modules/es.array.includes.js");require("core-js/modules/es.string.includes.js");var _debug=_interopRequireDefault(require("debug"));var _hasElementsTitle=_interopRequireDefault(require("../common/has-elements-title"));var _getGroup=_interopRequireDefault(require("../common/get-group"));var _transformTypeStringAnswer=_interopRequireDefault(require("./transform-type-string-answer"));var _transformTypeNumberAnswer=_interopRequireDefault(require("./transform-type-number-answer"));var _transformTypeBooleanAnswer=_interopRequireDefault(require("./transform-type-boolean-answer"));var _transformTypeNullAnswer=_interopRequireDefault(require("./transform-type-null-answer"));var _transformTypeObjectAnswers=_interopRequireDefault(require("./transform-type-object-answers"));var _transformTypeArrayAnswers=_interopRequireDefault(require("./transform-type-array-answers"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}var log=(0,_debug["default"])('shinkansen-pinion:transformers:check-answers');function transformTypeObjectAnswer(_ref,resource){var _ref$elements=_ref.elements;_ref$elements=_ref$elements===void 0?{}:_ref$elements;var _ref$elements$fields=_ref$elements.fields,fields=_ref$elements$fields===void 0?[]:_ref$elements$fields;var array=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var group=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];log('transformTypeObjectAnswer');return fields.reduce(function(accumulator,answer,i,a){if((0,_hasElementsTitle["default"])(answer)){group=(0,_getGroup["default"])(i,a);if(group.length){return accumulator.concat((0,_transformTypeObjectAnswers["default"])([answer].concat(_toConsumableArray(group)),resource));}}return!group.includes(answer)?accumulator.concat(transformAnswer(answer,resource,array,group)):accumulator;},array);}function transformTypeArrayAnswer(_ref2,resource){var _ref2$elements=_ref2.elements;_ref2$elements=_ref2$elements===void 0?{}:_ref2$elements;var _ref2$elements$fields=_ref2$elements.fields,fields=_ref2$elements$fields===void 0?[]:_ref2$elements$fields;var array=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var group=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];log('transformTypeArrayAnswer');return fields.reduce(function(accumulator,answer,i,a){if((0,_hasElementsTitle["default"])(answer)){group=(0,_getGroup["default"])(i,a);if(group.length){return accumulator.concat((0,_transformTypeArrayAnswers["default"])([answer].concat(_toConsumableArray(group)),resource));}}return!group.includes(answer)?accumulator.concat(transformAnswer(answer,resource,array,group)):accumulator;},array);}function transformAnswer(answer,resource){var array=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var group=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var _answer$meta=answer.meta;_answer$meta=_answer$meta===void 0?{}:_answer$meta;var type=_answer$meta.type;switch(type){case'string':return array.concat((0,_transformTypeStringAnswer["default"])(answer,resource));case'number':return array.concat((0,_transformTypeNumberAnswer["default"])(answer,resource));case'object':return array.concat(transformTypeObjectAnswer(answer,resource,array,group));case'array':return array.concat(transformTypeArrayAnswer(answer,resource,array,group));case'boolean':return array.concat((0,_transformTypeBooleanAnswer["default"])(answer,resource));case'null':return array.concat((0,_transformTypeNullAnswer["default"])(answer,resource));}return null;}